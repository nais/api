---
apiVersion: nais.io/v1
kind: Naisjob
metadata:
  annotations:
    deploy.nais.io/client-version: 2023-12-19-bbbb39b
    deploy.nais.io/github-actor: jhrv
    deploy.nais.io/github-sha: c0b39684d253c19e39fd0afeecf203aef943fe7b
    deploy.nais.io/github-workflow-run-url: https://github.com/nais/dataproduct-apps/actions/runs/7427397068
    kubernetes.io/change-cause: "nais deploy: commit c0b39684d253c19e39fd0afeecf203aef943fe7b:
      https://github.com/nais/dataproduct-apps/actions/runs/7427397068"
    nais.io/deploymentCorrelationID: 54c600b1-c2a6-4018-9fb3-649df7a8920d
  creationTimestamp: "2022-07-06T09:45:17Z"
  finalizers:
    - naiserator.nais.io/finalizer
  generation: 243
  name: dataproduct-apps-topics
  resourceVersion: "4085586970"
  uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
spec:
  azure:
    application:
      enabled: true
  command:
    - dataproduct-apps-topics
  gcp:
    buckets:
      - name: dataproduct-apps-topics2
  image: ghcr.io/nais/dataproduct-apps-topics:v1
  liveness:
    path: /isHealthy
  readiness:
    path: /isReady
  schedule: 45 3 * * *
  timeZone: "Europe/Oslo"
  envFrom:
    - secret: my-secret
    - secret: my-other-secret
  filesFrom:
    - mountPath: /var/run/secrets
      secret: my-secret
  accessPolicy:
    outbound:
      external:
        - host: "slack.com"
        - host: api.example.com
          ports:
            - port: 9200
        - ipv4: 1.2.3.4
          ports:
            - port: 443
            - port: 80
        - ipv4: 127.0.0.1
      rules:
        - application: app-w-all-storage
        - application: app-w-read-storage
Â´status:
  conditions:
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "True"
      type: Ready
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "False"
      type: Stalled
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "False"
      type: Reconciling
  correlationID: 54c600b1-c2a6-4018-9fb3-649df7a8920d
  deploymentRolloutStatus: complete
  rolloutCompleteTime: 1704838357272567094
  synchronizationHash: 6e0cb332b94540ec
  synchronizationState: RolloutComplete
  synchronizationTime: 1704838351872468010
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    batch.kubernetes.io/cronjob-scheduled-timestamp: "2024-12-10T03:45:00Z"
    nais.io/deploymentCorrelationID: d3778e4f-84ae-416e-a53b-59478088ece7
  creationTimestamp: "2024-12-10T03:45:00Z"
  generation: 1
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics-28896705
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: CronJob
      name: dataproduct-apps-topics
      uid: 8b7674b8-7d9f-4cde-99e4-039f5261c51e
  resourceVersion: "5970222810"
  uid: baa385d3-59e7-49e9-881a-aa197ee37ffc
spec:
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: baa385d3-59e7-49e9-881a-aa197ee37ffc
  suspend: false
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: dataproduct-apps-topics
      creationTimestamp: null
      labels:
        apiserver-access: enabled
        app: dataproduct-apps-topics
        batch.kubernetes.io/controller-uid: baa385d3-59e7-49e9-881a-aa197ee37ffc
        batch.kubernetes.io/job-name: dataproduct-apps-topics-28896705
        controller-uid: baa385d3-59e7-49e9-881a-aa197ee37ffc
        job-name: dataproduct-apps-topics-28896705
        nais.io/naisjob: "true"
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - dataproduct-apps-topics
                topologyKey: kubernetes.io/hostname
              weight: 10
      containers:
        - command:
            - dataproduct-apps-topics
          env:
            - name: PORT
              value: "8080"
            - name: BIND_ADDRESS
              value: 0.0.0.0:8080
          image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240925081649-47ebf39
          imagePullPolicy: IfNotPresent
          lifecycle:
            preStop:
              exec:
                command:
                  - sleep
                  - "5"
          name: dataproduct-apps-topics
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 256Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1069
            runAsNonRoot: true
            runAsUser: 1069
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /etc/ssl/certs/java/cacerts
              name: ca-bundle-jks
              readOnly: true
              subPath: ca-bundle.jks
            - mountPath: /etc/ssl/certs/ca-certificates.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/certs/ca-bundle.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/ssl/ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/cacert.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /tmp
              name: writable-tmp
      dnsPolicy: ClusterFirst
      imagePullSecrets:
        - name: gh-docker-credentials
        - name: gar-docker-credentials
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1069
        fsGroupChangePolicy: OnRootMismatch
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: dataproduct-apps-topics
      serviceAccountName: dataproduct-apps-topics
      terminationGracePeriodSeconds: 30
      volumes:
        - configMap:
            defaultMode: 420
            name: ca-bundle-jks
          name: ca-bundle-jks
        - configMap:
            defaultMode: 420
            name: ca-bundle-pem
          name: ca-bundle-pem
        - emptyDir: {}
          name: writable-tmp
status:
  completionTime: "2024-12-10T03:45:28Z"
  conditions:
    - lastProbeTime: "2024-12-10T03:45:28Z"
      lastTransitionTime: "2024-12-10T03:45:28Z"
      status: "True"
      type: Complete
  ready: 0
  startTime: "2024-12-10T03:45:00Z"
  succeeded: 1
  terminating: 0
  uncountedTerminatedPods: {}
---
apiVersion: v1
kind: Pod
metadata:
  annotations:
    cni.projectcalico.org/containerID: 153cc7fff4df4f00227a7128024f072ac88ca5b6a2b00a6b5ca9c1b0b1c50d9d
    cni.projectcalico.org/podIP: ""
    cni.projectcalico.org/podIPs: ""
    kubectl.kubernetes.io/default-container: dataproduct-apps-topics
    linkerd.io/created-by: linkerd/proxy-injector stable-2.13.5
    linkerd.io/inject: enabled
    linkerd.io/proxy-version: stable-2.13.5
    linkerd.io/trust-root-sha256: 95be0aea51c2649358e8514816eb9bfad119cc46338fd8eb4c47a6cfcd2d49d8
  creationTimestamp: "2024-12-12T03:45:00Z"
  generateName: dataproduct-apps-topics-28896705-
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    batch.kubernetes.io/controller-uid: d9826040-10c9-4fab-832d-f6797efe69fa
    batch.kubernetes.io/job-name: dataproduct-apps-topics-28896705
    controller-uid: d9826040-10c9-4fab-832d-f6797efe69fa
    job-name: dataproduct-apps-topics-28896705
    linkerd.io/control-plane-ns: linkerd
    linkerd.io/workload-ns: aura
    nais.io/naisjob: "true"
    team: aura
  name: dataproduct-apps-topics-28896705-b8mss
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: Job
      name: dataproduct-apps-topics-28896705
      uid: d9826040-10c9-4fab-832d-f6797efe69fa
  resourceVersion: "5981716614"
  uid: 5a76631c-6231-456a-821f-3cdeab18599e
spec:
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - podAffinityTerm:
            labelSelector:
              matchExpressions:
                - key: app
                  operator: In
                  values:
                    - dataproduct-apps-topics
            topologyKey: kubernetes.io/hostname
          weight: 10
  containers:
    - env:
        - name: _pod_name
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: _pod_ns
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: _pod_nodeName
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: LINKERD2_PROXY_LOG
          value: warn,linkerd=info,trust_dns=error
        - name: LINKERD2_PROXY_LOG_FORMAT
          value: plain
        - name: LINKERD2_PROXY_DESTINATION_SVC_ADDR
          value: linkerd-dst-headless.linkerd.svc.cluster.local.:8086
        - name: LINKERD2_PROXY_DESTINATION_PROFILE_NETWORKS
          value: 10.0.0.0/8,100.64.0.0/10,172.16.0.0/12,192.168.0.0/16
        - name: LINKERD2_PROXY_POLICY_SVC_ADDR
          value: linkerd-policy.linkerd.svc.cluster.local.:8090
        - name: LINKERD2_PROXY_POLICY_WORKLOAD
          value: $(_pod_ns):$(_pod_name)
        - name: LINKERD2_PROXY_INBOUND_DEFAULT_POLICY
          value: all-unauthenticated
        - name: LINKERD2_PROXY_POLICY_CLUSTER_NETWORKS
          value: 10.0.0.0/8,100.64.0.0/10,172.16.0.0/12,192.168.0.0/16
        - name: LINKERD2_PROXY_INBOUND_CONNECT_TIMEOUT
          value: 100ms
        - name: LINKERD2_PROXY_OUTBOUND_CONNECT_TIMEOUT
          value: 1000ms
        - name: LINKERD2_PROXY_OUTBOUND_DISCOVERY_IDLE_TIMEOUT
          value: 5s
        - name: LINKERD2_PROXY_INBOUND_DISCOVERY_IDLE_TIMEOUT
          value: 90s
        - name: LINKERD2_PROXY_CONTROL_LISTEN_ADDR
          value: 0.0.0.0:4190
        - name: LINKERD2_PROXY_ADMIN_LISTEN_ADDR
          value: 0.0.0.0:4191
        - name: LINKERD2_PROXY_OUTBOUND_LISTEN_ADDR
          value: 127.0.0.1:4140
        - name: LINKERD2_PROXY_INBOUND_LISTEN_ADDR
          value: 0.0.0.0:4143
        - name: LINKERD2_PROXY_INBOUND_IPS
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIPs
        - name: LINKERD2_PROXY_INBOUND_PORTS
        - name: LINKERD2_PROXY_DESTINATION_PROFILE_SUFFIXES
          value: svc.cluster.local.
        - name: LINKERD2_PROXY_INBOUND_ACCEPT_KEEPALIVE
          value: 10000ms
        - name: LINKERD2_PROXY_OUTBOUND_CONNECT_KEEPALIVE
          value: 10000ms
        - name: LINKERD2_PROXY_INBOUND_PORTS_DISABLE_PROTOCOL_DETECTION
          value: 25,587,3306,4444,5432,6379,9300,11211
        - name: LINKERD2_PROXY_DESTINATION_CONTEXT
          value: |
            {"ns":"$(_pod_ns)", "nodeName":"$(_pod_nodeName)"}
        - name: _pod_sa
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: _l5d_ns
          value: linkerd
        - name: _l5d_trustdomain
          value: cluster.local
        - name: LINKERD2_PROXY_IDENTITY_DIR
          value: /var/run/linkerd/identity/end-entity
        - name: LINKERD2_PROXY_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/tokens/linkerd-identity-token
        - name: LINKERD2_PROXY_IDENTITY_SVC_ADDR
          value: linkerd-identity-headless.linkerd.svc.cluster.local.:8080
        - name: LINKERD2_PROXY_IDENTITY_LOCAL_NAME
          value: $(_pod_sa).$(_pod_ns).serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_IDENTITY_SVC_NAME
          value: linkerd-identity.linkerd.serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_DESTINATION_SVC_NAME
          value: linkerd-destination.linkerd.serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_POLICY_SVC_NAME
          value: linkerd-destination.linkerd.serviceaccount.identity.linkerd.cluster.local
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy:stable-2.13.5
      imagePullPolicy: IfNotPresent
      lifecycle:
        postStart:
          exec:
            command:
              - /usr/lib/linkerd/linkerd-await
              - --timeout=2m
        preStop:
          exec:
            command:
              - /bin/sleep
              - "10"
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /live
          port: 4191
          scheme: HTTP
        initialDelaySeconds: 10
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      name: linkerd-proxy
      ports:
        - containerPort: 4143
          name: linkerd-proxy
          protocol: TCP
        - containerPort: 4191
          name: linkerd-admin
          protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /ready
          port: 4191
          scheme: HTTP
        initialDelaySeconds: 2
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          cpu: 200m
          memory: 500M
        requests:
          cpu: 10m
          memory: 10M
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 2102
        seccompProfile:
          type: RuntimeDefault
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
        - mountPath: /var/run/linkerd/identity/end-entity
          name: linkerd-identity-end-entity
        - mountPath: /var/run/secrets/tokens
          name: linkerd-identity-token
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-lrm4n
          readOnly: true
    - command:
        - dataproduct-apps-topics
      env:
        - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
          value: "true"
        - name: PORT
          value: "8080"
        - name: BIND_ADDRESS
          value: 0.0.0.0:8080
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240925081649-47ebf39
      imagePullPolicy: IfNotPresent
      lifecycle:
        preStop:
          exec:
            command:
              - sleep
              - "5"
      name: dataproduct-apps-topics
      resources:
        limits:
          cpu: 500m
          memory: 512Mi
        requests:
          cpu: 200m
          memory: 256Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        privileged: false
        readOnlyRootFilesystem: true
        runAsGroup: 1069
        runAsNonRoot: true
        runAsUser: 1069
        seccompProfile:
          type: RuntimeDefault
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
        - mountPath: /etc/ssl/certs/java/cacerts
          name: ca-bundle-jks
          readOnly: true
          subPath: ca-bundle.jks
        - mountPath: /etc/ssl/certs/ca-certificates.crt
          name: ca-bundle-pem
          readOnly: true
          subPath: ca-bundle.pem
        - mountPath: /etc/pki/tls/certs/ca-bundle.crt
          name: ca-bundle-pem
          readOnly: true
          subPath: ca-bundle.pem
        - mountPath: /etc/ssl/ca-bundle.pem
          name: ca-bundle-pem
          readOnly: true
          subPath: ca-bundle.pem
        - mountPath: /etc/pki/tls/cacert.pem
          name: ca-bundle-pem
          readOnly: true
          subPath: ca-bundle.pem
        - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
          name: ca-bundle-pem
          readOnly: true
          subPath: ca-bundle.pem
        - mountPath: /tmp
          name: writable-tmp
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-lrm4n
          readOnly: true
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  imagePullSecrets:
    - name: gh-docker-credentials
    - name: gar-docker-credentials
  initContainers:
    - args:
        - --incoming-proxy-port
        - "4143"
        - --outgoing-proxy-port
        - "4140"
        - --proxy-uid
        - "2102"
        - --inbound-ports-to-ignore
        - 4190,4191,4567,4568
        - --outbound-ports-to-ignore
        - 4567,4568
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy-init:v2.2.1
      imagePullPolicy: IfNotPresent
      name: linkerd-init
      resources:
        limits:
          cpu: 100m
          memory: 20Mi
        requests:
          cpu: 100m
          memory: 20Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          add:
            - NET_ADMIN
            - NET_RAW
          drop:
            - ALL
        privileged: false
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 65534
        seccompProfile:
          type: RuntimeDefault
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
        - mountPath: /run
          name: linkerd-proxy-init-xtables-lock
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-lrm4n
          readOnly: true
  nodeName: gke-dev-gcp-nap-e2-standard-16-1x43iv-4e37b2af-y2r2
  preemptionPolicy: PreemptLowerPriority
  priority: 0
  restartPolicy: Never
  schedulerName: gke.io/optimize-utilization-scheduler
  securityContext:
    fsGroup: 1069
    fsGroupChangePolicy: OnRootMismatch
    seccompProfile:
      type: RuntimeDefault
  serviceAccount: dataproduct-apps-topics
  serviceAccountName: dataproduct-apps-topics
  terminationGracePeriodSeconds: 30
  tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
  volumes:
    - configMap:
        defaultMode: 420
        name: ca-bundle-jks
      name: ca-bundle-jks
    - configMap:
        defaultMode: 420
        name: ca-bundle-pem
      name: ca-bundle-pem
    - emptyDir: {}
      name: writable-tmp
    - name: kube-api-access-lrm4n
      projected:
        defaultMode: 420
        sources:
          - serviceAccountToken:
              expirationSeconds: 3607
              path: token
          - configMap:
              items:
                - key: ca.crt
                  path: ca.crt
              name: kube-root-ca.crt
          - downwardAPI:
              items:
                - fieldRef:
                    apiVersion: v1
                    fieldPath: metadata.namespace
                  path: namespace
    - emptyDir: {}
      name: linkerd-proxy-init-xtables-lock
    - emptyDir:
        medium: Memory
      name: linkerd-identity-end-entity
    - name: linkerd-identity-token
      projected:
        defaultMode: 420
        sources:
          - serviceAccountToken:
              audience: identity.l5d.io
              expirationSeconds: 86400
              path: linkerd-identity-token
status:
  conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-12T03:45:31Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-12T03:45:03Z"
      reason: PodCompleted
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-12T03:45:28Z"
      reason: PodCompleted
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-12T03:45:28Z"
      reason: PodCompleted
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-12T03:45:00Z"
      status: "True"
      type: PodScheduled
  containerStatuses:
    - containerID: containerd://9dbf790ca0465d3289ac7e88c6ccef4794c6001571972d8e40b2dfe18b05c4b9
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240925081649-47ebf39
      imageID: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps@sha256:202891733c3432829577eb9bb4790cbbf9180cbe737ef9f0ed8a5d9ddb7b93cf
      lastState: {}
      name: dataproduct-apps-topics
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://9dbf790ca0465d3289ac7e88c6ccef4794c6001571972d8e40b2dfe18b05c4b9
          exitCode: 0
          finishedAt: "2024-12-12T03:45:21Z"
          reason: Completed
          startedAt: "2024-12-12T03:45:08Z"
    - containerID: containerd://bf7e0b154e75e8cfcb8ec9dbac5a28df04ae565636d46ece5a0dfc364e00dcf3
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy:stable-2.13.5
      imageID: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy@sha256:28d19a1335373358fdb17f8c5c1b2c5242593b792b67edfbdf798b1cfa54f2e6
      lastState: {}
      name: linkerd-proxy
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://bf7e0b154e75e8cfcb8ec9dbac5a28df04ae565636d46ece5a0dfc364e00dcf3
          exitCode: 0
          finishedAt: "2024-12-12T03:45:29Z"
          reason: Completed
          startedAt: "2024-12-12T03:45:04Z"
  hostIP: 10.6.8.192
  hostIPs:
    - ip: 10.6.8.192
  initContainerStatuses:
    - containerID: containerd://77d7cc693567b9200a48d6f37dc1c0d3e65203687f5e4dfb335f61f0de03f7c3
      image: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy-init:v2.2.1
      imageID: europe-north1-docker.pkg.dev/nais-io/nais/images/linkerd-proxy-init@sha256:00c10126728972743f8f031c193e54066d058033f009992873e71bff03e2cac5
      lastState: {}
      name: linkerd-init
      ready: true
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://77d7cc693567b9200a48d6f37dc1c0d3e65203687f5e4dfb335f61f0de03f7c3
          exitCode: 0
          finishedAt: "2024-12-12T03:45:03Z"
          reason: Completed
          startedAt: "2024-12-12T03:45:02Z"
  phase: Succeeded
  podIP: 10.6.94.213
  podIPs:
    - ip: 10.6.94.213
  qosClass: Burstable
  startTime: "2024-12-12T03:45:00Z"
---
apiVersion: nais.io/v1
kind: Naisjob
metadata:
  annotations:
    deploy.nais.io/client-version: 2023-12-19-bbbb39b
    deploy.nais.io/github-actor: jhrv
    deploy.nais.io/github-sha: c0b39684d253c19e39fd0afeecf203aef943fe7b
    deploy.nais.io/github-workflow-run-url: https://github.com/nais/dataproduct-apps/actions/runs/7427397068
    kubernetes.io/change-cause: "nais deploy: commit c0b39684d253c19e39fd0afeecf203aef943fe7b:
      https://github.com/nais/dataproduct-apps/actions/runs/7427397068"
    nais.io/deploymentCorrelationID: 54c600b1-c2a6-4018-9fb3-649df7a8920d
  creationTimestamp: "2022-07-06T09:45:17Z"
  finalizers:
    - naiserator.nais.io/finalizer
  generation: 243
  name: dataproduct-naisjobs-topics
  resourceVersion: "4085586970"
  uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
spec:
  command:
    - dataproduct-apps-topics
  gcp:
    buckets:
      - name: dataproduct-apps-topics2
  image: ghcr.io/nais/dataproduct-naisjobs-topics:v1
  liveness:
    path: /isHealthy
  readiness:
    path: /isReady
  schedule: 45 3 * * *
  envFrom:
    - secret: other-secret
status:
  conditions:
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "True"
      type: Ready
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "False"
      type: Stalled
    - lastTransitionTime: "2024-01-05T22:35:39Z"
      message: complete
      reason: RolloutComplete
      status: "False"
      type: Reconciling
  correlationID: 54c600b1-c2a6-4018-9fb3-649df7a8920d
  deploymentRolloutStatus: complete
  rolloutCompleteTime: 1704838357272567094
  synchronizationHash: 6e0cb332b94540ec
  synchronizationState: RolloutComplete
  synchronizationTime: 1704838351872468010
---
apiVersion: batch/v1
kind: CronJob
metadata:
  annotations:
    kubernetes.io/change-cause: "nais deploy: commit 47ebf39278290565527a8bece2d28b1b64b410e7:
      https://github.com/nais/dataproduct-apps/actions/runs/11029062748"
    nais.io/deploymentCorrelationID: d3778e4f-84ae-416e-a53b-59478088ece7
  creationTimestamp: "2022-07-06T09:45:18Z"
  generation: 56
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics
  namespace: aura
  ownerReferences:
    - apiVersion: nais.io/v1
      kind: Naisjob
      name: dataproduct-apps-topics
      uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
  resourceVersion: "5622153260"
  uid: 8b7674b8-7d9f-4cde-99e4-039f5261c51e
spec:
  concurrencyPolicy: Allow
  failedJobsHistoryLimit: 1
  jobTemplate:
    metadata:
      annotations:
        nais.io/deploymentCorrelationID: d3778e4f-84ae-416e-a53b-59478088ece7
      creationTimestamp: null
      labels:
        apiserver-access: enabled
        app: dataproduct-apps-topics
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
    spec:
      backoffLimit: 6
      template:
        metadata:
          annotations:
            kubectl.kubernetes.io/default-container: dataproduct-apps-topics
          creationTimestamp: null
          labels:
            apiserver-access: enabled
            app: dataproduct-apps-topics
            nais.io/naisjob: "true"
            team: aura
          name: dataproduct-apps-topics
          namespace: aura
          ownerReferences:
            - apiVersion: nais.io/v1
              kind: Naisjob
              name: dataproduct-apps-topics
              uid: 3152cb5a-95f5-4418-8bd2-13b6d9f6058f
        spec:
          affinity:
            podAntiAffinity:
              preferredDuringSchedulingIgnoredDuringExecution:
                - podAffinityTerm:
                    labelSelector:
                      matchExpressions:
                        - key: app
                          operator: In
                          values:
                            - dataproduct-apps-topics
                    topologyKey: kubernetes.io/hostname
                  weight: 10
          containers:
            - command:
                - dataproduct-apps-topics
              env:
                - name: NAV_TRUSTSTORE_PATH
                  value: /etc/ssl/certs/java/cacerts
                - name: NAV_TRUSTSTORE_PASSWORD
                  value: changeme
                - name: NODE_EXTRA_CA_CERTS
                  value: /etc/pki/tls/certs/ca-bundle.crt
                - name: GOOGLE_CLOUD_PROJECT
                  value: aura-dev-d9f5
                - name: GCP_TEAM_PROJECT_ID
                  value: aura-dev-d9f5
                - name: NAIS_APP_NAME
                  value: dataproduct-apps-topics
                - name: NAIS_NAMESPACE
                  value: aura
                - name: NAIS_APP_IMAGE
                  value: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240925081649-47ebf39
                - name: NAIS_CLUSTER_NAME
                  value: dev-gcp
                - name: NAIS_CLIENT_ID
                  value: dev-gcp:aura:dataproduct-apps-topics
                - name: LOG4J_FORMAT_MSG_NO_LOOKUPS
                  value: "true"
                - name: PORT
                  value: "8080"
                - name: BIND_ADDRESS
                  value: 0.0.0.0:8080
              image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240925081649-47ebf39
              imagePullPolicy: IfNotPresent
              lifecycle:
                preStop:
                  exec:
                    command:
                      - sleep
                      - "5"
              name: dataproduct-apps-topics
              resources:
                limits:
                  cpu: 500m
                  memory: 512Mi
                requests:
                  cpu: 200m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                privileged: false
                readOnlyRootFilesystem: true
                runAsGroup: 1069
                runAsNonRoot: true
                runAsUser: 1069
                seccompProfile:
                  type: RuntimeDefault
              terminationMessagePath: /dev/termination-log
              terminationMessagePolicy: File
              volumeMounts:
                - mountPath: /etc/ssl/certs/java/cacerts
                  name: ca-bundle-jks
                  readOnly: true
                  subPath: ca-bundle.jks
                - mountPath: /etc/ssl/certs/ca-certificates.crt
                  name: ca-bundle-pem
                  readOnly: true
                  subPath: ca-bundle.pem
                - mountPath: /etc/pki/tls/certs/ca-bundle.crt
                  name: ca-bundle-pem
                  readOnly: true
                  subPath: ca-bundle.pem
                - mountPath: /etc/ssl/ca-bundle.pem
                  name: ca-bundle-pem
                  readOnly: true
                  subPath: ca-bundle.pem
                - mountPath: /etc/pki/tls/cacert.pem
                  name: ca-bundle-pem
                  readOnly: true
                  subPath: ca-bundle.pem
                - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
                  name: ca-bundle-pem
                  readOnly: true
                  subPath: ca-bundle.pem
                - mountPath: /tmp
                  name: writable-tmp
          dnsPolicy: ClusterFirst
          imagePullSecrets:
            - name: gh-docker-credentials
            - name: gar-docker-credentials
          restartPolicy: Never
          schedulerName: default-scheduler
          securityContext:
            fsGroup: 1069
            fsGroupChangePolicy: OnRootMismatch
            seccompProfile:
              type: RuntimeDefault
          serviceAccount: dataproduct-apps-topics
          serviceAccountName: dataproduct-apps-topics
          terminationGracePeriodSeconds: 30
          volumes:
            - configMap:
                defaultMode: 420
                name: ca-bundle-jks
              name: ca-bundle-jks
            - configMap:
                defaultMode: 420
                name: ca-bundle-pem
              name: ca-bundle-pem
            - emptyDir: {}
              name: writable-tmp
  schedule: 45 3 * * *
  successfulJobsHistoryLimit: 3
  suspend: false
status:
  lastScheduleTime: "2024-10-09T03:45:00Z"
  lastSuccessfulTime: "2024-10-09T03:45:22Z"

---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    batch.kubernetes.io/cronjob-scheduled-timestamp: "2024-09-02T03:45:00Z"
    nais.io/deploymentCorrelationID: 4027de17-5b94-4190-8201-68cb60c59b6c
  creationTimestamp: "2024-09-02T03:45:00Z"
  generation: 1
  labels:
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics-28754145
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: CronJob
      name: dataproduct-apps-topics
      uid: 9aacd2a4-3e60-4aae-a903-75efeca3d669
  resourceVersion: "4956436194"
  uid: b7d0c998-9799-4585-b72b-592b76a40efd
spec:
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: b7d0c998-9799-4585-b72b-592b76a40efd
  suspend: false
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: dataproduct-apps-topics
      creationTimestamp: null
      labels:
        app: dataproduct-apps-topics
        batch.kubernetes.io/controller-uid: b7d0c998-9799-4585-b72b-592b76a40efd
        batch.kubernetes.io/job-name: dataproduct-apps-topics-28754145
        controller-uid: b7d0c998-9799-4585-b72b-592b76a40efd
        job-name: dataproduct-apps-topics-28754145
        nais.io/naisjob: "true"
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 68002180-a3a5-41e0-a7b7-cd7ba70df7a1
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - dataproduct-apps-topics
                topologyKey: kubernetes.io/hostname
              weight: 10
      containers:
        - command:
            - dataproduct-apps-topics
          image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240830103811-7b6c7fc
          imagePullPolicy: IfNotPresent
          lifecycle:
            preStop:
              exec:
                command:
                  - sleep
                  - "5"
          name: dataproduct-apps-topics
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 256Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1069
            runAsNonRoot: true
            runAsUser: 1069
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /etc/ssl/certs/java/cacerts
              name: ca-bundle-jks
              readOnly: true
              subPath: ca-bundle.jks
            - mountPath: /etc/ssl/certs/ca-certificates.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/certs/ca-bundle.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/ssl/ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/cacert.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /tmp
              name: writable-tmp
      dnsPolicy: ClusterFirst
      imagePullSecrets:
        - name: gh-docker-credentials
        - name: gar-docker-credentials
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1069
        fsGroupChangePolicy: OnRootMismatch
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: dataproduct-apps-topics
      serviceAccountName: dataproduct-apps-topics
      terminationGracePeriodSeconds: 30
      volumes:
        - configMap:
            defaultMode: 420
            name: ca-bundle-jks
          name: ca-bundle-jks
        - configMap:
            defaultMode: 420
            name: ca-bundle-pem
          name: ca-bundle-pem
        - emptyDir: {}
          name: writable-tmp
status:
  conditions:
    - lastProbeTime: "2024-09-02T04:54:55Z"
      lastTransitionTime: "2024-09-02T04:54:55Z"
      message: Job has reached the specified backoff limit
      reason: BackoffLimitExceeded
      status: "True"
      type: Failed
  failed: 7
  ready: 0
  startTime: "2024-09-02T03:45:00Z"
  terminating: 0
  uncountedTerminatedPods: {}
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    batch.kubernetes.io/cronjob-scheduled-timestamp: "2024-09-15T03:45:00Z"
    nais.io/deploymentCorrelationID: 67764195-4803-4baf-aa94-28e4ac8487d6
  creationTimestamp: "2024-09-15T03:45:00Z"
  generation: 1
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics-28772865
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: CronJob
      name: dataproduct-apps-topics
      uid: 9aacd2a4-3e60-4aae-a903-75efeca3d669
  resourceVersion: "5026702083"
  uid: da156328-3dc6-4324-a330-8e3fec55c954
spec:
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: da156328-3dc6-4324-a330-8e3fec55c954
  suspend: false
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: dataproduct-apps-topics
      creationTimestamp: null
      labels:
        apiserver-access: enabled
        app: dataproduct-apps-topics
        batch.kubernetes.io/controller-uid: da156328-3dc6-4324-a330-8e3fec55c954
        batch.kubernetes.io/job-name: dataproduct-apps-topics-28772865
        controller-uid: da156328-3dc6-4324-a330-8e3fec55c954
        job-name: dataproduct-apps-topics-28772865
        nais.io/naisjob: "true"
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 68002180-a3a5-41e0-a7b7-cd7ba70df7a1
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - dataproduct-apps-topics
                topologyKey: kubernetes.io/hostname
              weight: 10
      containers:
        - command:
            - dataproduct-apps-topics
          image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240912134256-f435989
          imagePullPolicy: IfNotPresent
          lifecycle:
            preStop:
              exec:
                command:
                  - sleep
                  - "5"
          name: dataproduct-apps-topics
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 256Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1069
            runAsNonRoot: true
            runAsUser: 1069
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /etc/ssl/certs/java/cacerts
              name: ca-bundle-jks
              readOnly: true
              subPath: ca-bundle.jks
            - mountPath: /etc/ssl/certs/ca-certificates.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/certs/ca-bundle.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/ssl/ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/cacert.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /tmp
              name: writable-tmp
      dnsPolicy: ClusterFirst
      imagePullSecrets:
        - name: gh-docker-credentials
        - name: gar-docker-credentials
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1069
        fsGroupChangePolicy: OnRootMismatch
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: dataproduct-apps-topics
      serviceAccountName: dataproduct-apps-topics
      terminationGracePeriodSeconds: 30
      volumes:
        - configMap:
            defaultMode: 420
            name: ca-bundle-jks
          name: ca-bundle-jks
        - configMap:
            defaultMode: 420
            name: ca-bundle-pem
          name: ca-bundle-pem
        - emptyDir: {}
          name: writable-tmp
status:
  completionTime: "2024-09-15T03:45:19Z"
  conditions:
    - lastProbeTime: "2024-09-15T03:45:19Z"
      lastTransitionTime: "2024-09-15T03:45:19Z"
      status: "True"
      type: Complete
  ready: 0
  startTime: "2024-09-15T03:45:00Z"
  succeeded: 1
  terminating: 0
  uncountedTerminatedPods: {}
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    batch.kubernetes.io/cronjob-scheduled-timestamp: "2024-09-16T03:45:00Z"
    nais.io/deploymentCorrelationID: 67764195-4803-4baf-aa94-28e4ac8487d6
  creationTimestamp: "2024-09-16T03:45:00Z"
  generation: 1
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics-28774305
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: CronJob
      name: dataproduct-apps-topics
      uid: 9aacd2a4-3e60-4aae-a903-75efeca3d669
  resourceVersion: "5031919758"
  uid: 1e02b8da-6fb8-47bf-b1bc-fcc981cdb9ce
spec:
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: 1e02b8da-6fb8-47bf-b1bc-fcc981cdb9ce
  suspend: false
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: dataproduct-apps-topics
      creationTimestamp: null
      labels:
        apiserver-access: enabled
        app: dataproduct-apps-topics
        batch.kubernetes.io/controller-uid: 1e02b8da-6fb8-47bf-b1bc-fcc981cdb9ce
        batch.kubernetes.io/job-name: dataproduct-apps-topics-28774305
        controller-uid: 1e02b8da-6fb8-47bf-b1bc-fcc981cdb9ce
        job-name: dataproduct-apps-topics-28774305
        nais.io/naisjob: "true"
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 68002180-a3a5-41e0-a7b7-cd7ba70df7a1
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - dataproduct-apps-topics
                topologyKey: kubernetes.io/hostname
              weight: 10
      containers:
        - command:
            - dataproduct-apps-topics
          image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240912134256-f435989
          imagePullPolicy: IfNotPresent
          lifecycle:
            preStop:
              exec:
                command:
                  - sleep
                  - "5"
          name: dataproduct-apps-topics
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 256Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1069
            runAsNonRoot: true
            runAsUser: 1069
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /etc/ssl/certs/java/cacerts
              name: ca-bundle-jks
              readOnly: true
              subPath: ca-bundle.jks
            - mountPath: /etc/ssl/certs/ca-certificates.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/certs/ca-bundle.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/ssl/ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/cacert.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /tmp
              name: writable-tmp
      dnsPolicy: ClusterFirst
      imagePullSecrets:
        - name: gh-docker-credentials
        - name: gar-docker-credentials
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1069
        fsGroupChangePolicy: OnRootMismatch
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: dataproduct-apps-topics
      serviceAccountName: dataproduct-apps-topics
      terminationGracePeriodSeconds: 30
      volumes:
        - configMap:
            defaultMode: 420
            name: ca-bundle-jks
          name: ca-bundle-jks
        - configMap:
            defaultMode: 420
            name: ca-bundle-pem
          name: ca-bundle-pem
        - emptyDir: {}
          name: writable-tmp
status:
  completionTime: "2024-09-16T03:45:21Z"
  conditions:
    - lastProbeTime: "2024-09-16T03:45:21Z"
      lastTransitionTime: "2024-09-16T03:45:21Z"
      status: "True"
      type: Complete
  ready: 0
  startTime: "2024-09-16T03:45:00Z"
  succeeded: 1
  terminating: 0
  uncountedTerminatedPods: {}
---
apiVersion: batch/v1
kind: Job
metadata:
  annotations:
    batch.kubernetes.io/cronjob-scheduled-timestamp: "2024-09-17T03:45:00Z"
    nais.io/deploymentCorrelationID: 67764195-4803-4baf-aa94-28e4ac8487d6
  creationTimestamp: "2024-09-17T03:45:00Z"
  generation: 1
  labels:
    apiserver-access: enabled
    app: dataproduct-apps-topics
    team: aura
  name: dataproduct-apps-topics-28775745
  namespace: aura
  ownerReferences:
    - apiVersion: batch/v1
      blockOwnerDeletion: true
      controller: true
      kind: CronJob
      name: dataproduct-apps-topics
      uid: 9aacd2a4-3e60-4aae-a903-75efeca3d669
  resourceVersion: "5037397238"
  uid: d8963bee-df6e-4394-8db6-3139020257fa
spec:
  backoffLimit: 6
  completionMode: NonIndexed
  completions: 1
  manualSelector: false
  parallelism: 1
  podReplacementPolicy: TerminatingOrFailed
  selector:
    matchLabels:
      batch.kubernetes.io/controller-uid: d8963bee-df6e-4394-8db6-3139020257fa
  suspend: false
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: dataproduct-apps-topics
      creationTimestamp: null
      labels:
        apiserver-access: enabled
        app: dataproduct-apps-topics
        batch.kubernetes.io/controller-uid: d8963bee-df6e-4394-8db6-3139020257fa
        batch.kubernetes.io/job-name: dataproduct-apps-topics-28775745
        controller-uid: d8963bee-df6e-4394-8db6-3139020257fa
        job-name: dataproduct-apps-topics-28775745
        nais.io/naisjob: "true"
        team: aura
      name: dataproduct-apps-topics
      namespace: aura
      ownerReferences:
        - apiVersion: nais.io/v1
          kind: Naisjob
          name: dataproduct-apps-topics
          uid: 68002180-a3a5-41e0-a7b7-cd7ba70df7a1
    spec:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app
                      operator: In
                      values:
                        - dataproduct-apps-topics
                topologyKey: kubernetes.io/hostname
              weight: 10
      containers:
        - command:
            - dataproduct-apps-topics
          image: europe-north1-docker.pkg.dev/nais-io/nais/images/dataproduct-apps:20240912134256-f435989
          imagePullPolicy: IfNotPresent
          lifecycle:
            preStop:
              exec:
                command:
                  - sleep
                  - "5"
          name: dataproduct-apps-topics
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 256Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1069
            runAsNonRoot: true
            runAsUser: 1069
            seccompProfile:
              type: RuntimeDefault
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
            - mountPath: /etc/ssl/certs/java/cacerts
              name: ca-bundle-jks
              readOnly: true
              subPath: ca-bundle.jks
            - mountPath: /etc/ssl/certs/ca-certificates.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/certs/ca-bundle.crt
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/ssl/ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/tls/cacert.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
              name: ca-bundle-pem
              readOnly: true
              subPath: ca-bundle.pem
            - mountPath: /tmp
              name: writable-tmp
      dnsPolicy: ClusterFirst
      imagePullSecrets:
        - name: gh-docker-credentials
        - name: gar-docker-credentials
      restartPolicy: Never
      schedulerName: default-scheduler
      securityContext:
        fsGroup: 1069
        fsGroupChangePolicy: OnRootMismatch
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: dataproduct-apps-topics
      serviceAccountName: dataproduct-apps-topics
      terminationGracePeriodSeconds: 30
      volumes:
        - configMap:
            defaultMode: 420
            name: ca-bundle-jks
          name: ca-bundle-jks
        - configMap:
            defaultMode: 420
            name: ca-bundle-pem
          name: ca-bundle-pem
        - emptyDir: {}
          name: writable-tmp
status:
  completionTime: "2024-09-17T03:45:21Z"
  conditions:
    - lastProbeTime: "2024-09-17T03:45:21Z"
      lastTransitionTime: "2024-09-17T03:45:21Z"
      status: "True"
      type: Complete
  ready: 0
  startTime: "2024-09-17T03:45:00Z"
  succeeded: 1
  terminating: 0
  uncountedTerminatedPods: {}
